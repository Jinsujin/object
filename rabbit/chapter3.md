# 3장. 타입과 추상화

> 훌륭한 프로그램을 작성하기 위한 전제조건은 추상화를 정확하게 다루는 능력이다.

<br/>

## 추상화를 통한 복잡성 극복

- 사람들은 본능적으로 이해하기 쉽고 예측 가능한 수준으로 현실을 분해하고 단순화하는 전략을 따른다.
- 추상화란 현실에서 출발하되 불필요한 부분을 도려내가면서 사물의 놀라운 본질은 드러나게 하는 과정
- 추상화는 복잡한 현실을 단순화하기 위해 사용하는 인간의 가장 기본적인 인지 수단

### 지하철 노선도 추상화

- 정확성을 버리고 목적에 맞는 디자인으로 재창조
- 불필요한 지형정보를 제거하고 목적에 맞는 정보만(연결성) 취해 단순화

<br/>

## 객체지향과 추상화

> 개념을 이용해 공통점을 가진 객체들을 분류한다.
> 개념은 객체들의 복잡성을 극복하기 위한 추상화 도구다.

앨리스는 하트 여왕, 왕, 병사, 정원사 모든 객체를 추상화하여 트럼프라고 인식한다. (모든 객체를 트럼프라는 공통점만을 취해 단순화)

- 개념(concept):
  - 공통점을 기반으로 객체들을 묶기 위한 그릇.
  - 예) 하트여왕은 트럼프 개념의 일원
- 분류(classification):
  - 공통점을 기반으로 객체를 분류
- 인스턴스(instance):
  - 개념이 객체에 적용됐을때 객체를 개념의 인스턴스라고 칭함
  - 예) 하얀토끼(객체)는 토끼(개념)의 일원이다. 따라서 토끼(개념)의 인스턴스다.
- 객체:
  - 특정한 개념을 적용할 수 있는 구체적인 사물

## 개념의 세가지 관점

개념은 특정한 객체가 어떤 그룹에 속할 것인지를 결정한다.

- 심볼(symbol)
  - 개념을 가르키는 간략한 이름이나 명칭
  - 예) 트럼프
- 내연(intension)
  - 개념의 완전한 정의를 나타내며 내연의 의미를 이용해 객체가 개념에 속하는지 여부를 확인할 수 있다.
  - 개념을 객체에게 적용할 수 있는지 여부를 판단하기 위한 조건
  - 예) 트럼프(개념,심볼)는 몸이 납작하고 두 손과 두 발이 메모난 몸 모서리에 달려있다.
- 외연(extension)
  - 개념에 속하는 모든 객체의 집합(set)
  - 개념의 인스턴스들이 모여 이루어진 집합
  - 예) 하트 여왕과 왕, 병사, 신하, 정원사...

### 개념을 통해 객체를 분류하는 과정

1. 구체적인 사물 간의 공통점은 취하고 차이점은 버리는 **일반화**를 통해 단순화
   - 하트 여왕과 왕, 병사, 신하, 정원사 객체의 차이점을 무시하고 트럼프라는 개념으로 묶는다
2. 중요한 부분을 강조하기 위해 불필요한 세부사항을 제거해 단순화
   - 트럼프들은 몸이 납작하고 손발이 네모난 몸 모서리에 달려있다

<br/>

## 타입(type)

> 개념 == 타입

타입은 개념의 정의와 동일하며, 공통점을 기반으로 객체들을 묶기 위한 틀이다.

- 컴퓨터안의 데이터를 목적에 따라 분류하기 시작하면서 프로그래밍 언어안에 타입 시스템(type system)이 자리잡았다.
  - 숫자형: +, -, /, \*
  - 문자열형
  - 논리형: 참,거짓
- 어떤 데이터에 어떤 연산자를 적용할 수 있느냐가 그 데이터 타입을 결정한다

## 객체지향 설계에 대한 중요한 원칙

> 객체를 결정하는 것은 행동

### 1. 객체가 어떤 행동을 하느냐에 따라 객체의 타입이 결정

- 동일한 책임을 수행하는 객체들은 동일한 타입에 속한다고 말할 수 있다.

  - 동일한 요청에 대해 서로 다른방식으로 응답할 수 있다.(다형성)
  - 동일한 요청(메시지)를 수신할 수 있게 하려면, 다형적인 객체들은 동일한 타입(또는 타입 계층)에 속하게 된다.

    ```swift
    class Animal {
    	func shout() {}
    }

    class Dog: Animal {
    	func shout() { "멍멍" }
    }

    class Cat: Animal {
    	func shout() { "야옹" }
    }
    ```

- 객체가 다른 객체와 동일한 데이터를 가지고 있더라도 다른 행동(책임)을 한다면 다른 타입으로 분류되어야 한다.

### 2. 객체의 내부적인 표현은 외부로 부터 철저히 감춰진다

객체를 결정하는 것은 행동이며, 데이터는 단지 행동을 따를 뿐이다.

- 외부에 행동만을 제공하고 데이터는 외부에 노출되지 않게 감추어야 한다(캡슐화)

객체가 외부에 제공해야 하는 책임을 먼저 결정하고 그 책임을 수행하는 데 적합한 데이터를 나중에 결정한 후, 데이터를 책임을 수행하는 데 필요한 외부 인터페이스 뒤로 캡슐화 해야 한다.

### 슈퍼타입과 서브타입

일반적인 타입을 슈퍼타입(Supertype), 좀더 특수한 타입을 서브타입(Subtype)이라고 한다.

여기서 중요한 것은 두 타입간의 관계가 행동에 의해 결정된다는 점이다.

일반적으로 서브타입은 슈퍼타입의 행위와 호환되기 때문에 서브타입은 슈퍼타입을 대체할 수 있어야 한다. (리스코프 치환원칙)

트럼프 인간은 트럼프(슈퍼타입)이므로 엎드리거나 뒤집어지기만 하는 경우 트럼프로 대체하더라도 무방할 것이다.

```swift
class Trump {
	func 엎드릴수있다 {}
	func 뒤집어질수있다 {}
}

class TrumpHuman: Trump {
	func 걸을수있다() {}
}
```

### 클래스

정적인 모델은 클래스를 이용해 구현된다. 따라서 타입을 구현하는 가장 보편적인 방법은 클래스를 이용하는 것이다.

클래스와 타입은 동일한 것이 아니다. 타입은 객체를 분류하기 위해 사용하는 개념일뿐이다.

- 객체를 분류하는 기준은 타입
  - 타입을 나누는 기준은 객체가 수행하는 행동
  - 객체를 분류하기 위해 타입을 결정한 후, 프로그래밍언어로 구현하는 방법 중 하나가 클래스
- 객체지향에서 중요한 것은 동적으로 변하는 객체의 상태와, 상태를 변경하는 행위이다.
