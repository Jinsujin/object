# 1장. 협력하는 객체들의 공동체

## 객체지향이란 무엇인가

1. 객체지향으로 향하는 첫걸음은 클래스가 아닌, 객체를 바라보는 것에서부터 시작한다.
2. 객체는 독립적이지 않다. 협력하는 공동체의 존재이다.
3. 객체들에게 적절한 역할과 책임 부여
4. 위의 개념들을 프로그래밍 언어에 담아낼 수 있는 기술을 익힌다.

### 객체지향 언어의 특징

메시지를 수신한 객체가 실행시간에 메서드를 선택할 수 있다.
절차적인 언어는 프로시저 호출에 대한 실행 코드를 컴파일 시간에 결정한다.

### 커피주문에서의 책임

역할, 책임, 협력은 다른 사람과 접촉하는 모든곳에 존재한다.

| 역할(Role) | 책임(Responsibility)     |
| ---------- | ------------------------ |
| 손님       | 커피를 주문한다          |
| 캐시어     | 손님의 주문을 받는다     |
| 바리스타   | 주문받은 커피를 제조한다 |

### 요청(request)과 응답(response)

```
{손님} ---(request)커피주문---> {캐시어} ---(request)커피제조---> {바리스타}
```

응답은 요청방향과 반대방향으로 연쇄적으로 전달된다:

```
{손님} ---(response)커피전달---> {캐시어} ---(response)커피완성---> {바리스타}
```

요청과 응답을 통해 다른사람과 협력(collaboration)한다.

협력의 성공은 각 개인이 요청을 성실히 이행하는가에 달려 있다.

## 역할과 책임

> p27
>
> 역할과 책임은 협력이 원할하게 진행되는 데 필요한 핵심적인 구성요소다.

역할이라는 단어는 의미적으로 책임이라는 개념을 내포한다.

예를들어, 선생님이라는 역할은 학생을 가르칠 책임이 있음을 암시한다.

협력에 참여하며 특정한 역할을 수행하는 사람들은 역할에 적합한 책임을 수행하게 된다.

- **여러사람이 동일한 역할을 수행할 수 있다.**
  - 손님은 캐시어의 역할만 수행한다면 주문을 요청할 수 있다.
- **역할은 대체 가능성을 의미한다.**
  - 손님 입장에서 캐시어는 대체 가능(substitutable)하다.
    손님의 입장에서 캐시어가 구체적으로 누군지는 상관없다.
- **책임을 수행하는 방법은 자율적으로 선택할 수 있다.(다형성 polymorphism)**
  - 요청을 받은 사람들은 요청을 처리하는 방법을 자유롭게 선택할 수 있다. 커피에 아트를 더할수도 있고 핸드드립으로 낼수도 있다. 즉, 같은 요청에 대해서 서로 다른방식으로 응답할 수 있다
- **한 사람이 동시에 여러 역할을 수행할 수 있다.**
  - 한 사람이 캐시어와 바리스타 두가지 역할을 모두 수행할 수 있다.

### 객체의 역할

> 역할은 유연하고 재사용 가능한 협력관계를 구축하는데 중요한 설계요소다.
> 이는 다형성과도 연관되어 있다.

- 여러 객체가 동일한 역할을 수행할 수 있다.

  ```swift
  protocol Barista {}

  class Amateur: Barista {}
  class Pro: Barista {}
  ```

- 역할은 대체가능성을 의미한다.
- 각 객체는 책임을 수행하는 방법을 자율적으로 선택할 수 있다.
- 하나의 객체가 동시에 여러 역할을 수행할 수 있다.
  ```swift
  class Manager: Barista, Cashier {}
  ```

<br/>
<br/>

# 객체지향에서의 객체

1. 객체는 협력적 이어야 한다.
   - 외부와 단절된채 스스로 처리하는 객체는 내부 복잡도에 의해자멸하고 말것이다.
   - 다른 객체의 명령에 따라 복종하는 수동적인 존재를 의미하지 않다. 다른 객체에 응답하는 것 뿐이다. 어떤 방식으로 응답할지는 객체 스스로 결정한다.
2. 객체는 자율적 이어야 한다.
   - 캐시어는 요청에 대해 스스로 판단하고 행동하는 자율적인 존재다
   - 다른 객체의 요청에 따라 행동을 시작하지만, 스스로의 결정과 판단에 따라 움직인다.

### 상태와 행동을 함께지닌 자율적인 객체

```
행동(behavior) + 상태(state)  = 자율적인 객체(스스로 자신을 책임짐)
```

- 객체가 협력하기 위해 어떤 행동을 해야한다면, 그 행동을 하는데 필요한 상태도 함께 지니고 있어야 한다.
- 객체의 사적인 부분은 객체 스스로 관리하고 외부에서 간섭할 수 없어야 한다(캡슐화)
- 겍체의 외부에서는 접근이 허락된 수단을 통해서만 객체와 의사소통 해야한다.(추상화?)
- 객체는 다른객체가 무엇(what)을 수행하는지 알 수 있지만 어떻게(how)수행하는지에 대해서는 알 수 없다.
- 객체의 자율성이란 자신의 상태를 직접 관리하고 상태를 기반으로 스스로 판단하고 행동할 수 있음을 의미

### 협력과 메시지

```
[송신자]객체(sender) --- 메시지 ---> [수신자]객체(receiver)
```

객체는 다른객체와 협력하기 위해 메시지를 전송한다.

수신자는 수신된 메시지를 자신만의 방법에 따라 처리하며, 그 처리방법을 메서드(method)라고 부른다.

- 메시지: 바리스타에게 커피 제조 요청
- 메서드: 바리스타가 커피를 제조하는 구체적 방법

메시지와 메서드의 분리는 객체의 협력에 참여하는 객체들간의 자율성을 증진시킨다. 같은 커피 제조 메시지를 받았더라도 그 메시지를 받아 수행하는 바리스타는 커피머신으로 제조할 수도, 수작업으로 제조할 수도 있다.
